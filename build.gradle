
apply plugin: 'java-library'
apply plugin: 'eclipse'
apply plugin: 'maven'

repositories {
  mavenCentral()
  jcenter()
}
  
group = 'com.github.zourzouvillys'

version = 'master-SNAPSHOT'
  
sourceCompatibility = 9
targetCompatibility = 9
  
  
configurations {
  api 
  'default' { extendsFrom api }
}

artifacts { api jar }

artifacts { jar }

jar {
  manifest {
    attributes ('Automatic-Module-Name': "zrz.webports")
  }
}      

dependencies {

  // shared libs
  implementation 'com.google.guava:guava:26.0-jre'
  implementation 'org.slf4j:slf4j-api:1.7.25'
  implementation 'io.reactivex.rxjava2:rxjava:2.2.2'
  
  // main transports.
  api 'io.netty:netty-codec-http2:4.1.30.Final'
  api 'io.netty:netty-codec-http:4.1.30.Final'
  
  implementation 'io.netty:netty-handler:4.1.30.Final'
  implementation 'io.netty:netty-transport:4.1.30.Final'

  compileOnly         'org.eclipse.jdt:org.eclipse.jdt.annotation:2.1.150'
  
  implementation 'org.bouncycastle:bcpkix-jdk15on:1.60'
  implementation 'org.bouncycastle:bcprov-jdk15on:1.60'
  
  implementation 'org.shredzone.acme4j:acme4j-client:2.3'
  implementation 'org.shredzone.acme4j:acme4j-utils:2.3'
  
  
  testImplementation  'junit:junit:4.12'
  testImplementation  'org.assertj:assertj-core:3.6.1'
  testImplementation  'ch.qos.logback:logback-classic:1.2.3'  
   
}

// --------------------------------------------------
// install
// --------------------------------------------------


task sourcesJar(type: Jar, dependsOn: classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

tasks.withType(Javadoc) {
  options.addStringOption('Xdoclint:none', '-quiet')
}
    
task javadocJar(type: Jar, dependsOn: javadoc) {
  classifier = 'javadoc'
  from javadoc.destinationDir
}

javadoc {
  options.addBooleanOption('html5', true)
}  

artifacts {
  archives jar
  archives sourcesJar
  archives javadocJar
}

javadoc {
  title = "ZRZ WebPorts"
  failOnError = false
}

install {
  repositories.mavenInstaller {
    pom.project {
      licenses {
        license {
          name 'The Apache Software License, Version 2.0'
          url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
          distribution 'repo'
        }
      }
    }
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '4.8'
}



